# shell条件判断

## 1.判断语句

a) test条件表达式

b) [ 条件表式 ]

c) [[ 条件表达式 ]]  `可匹配正则~`

d) 判断后执行多个命令

```
[ 条件1 ] && {
	命令1
	命令2
} || {
	命令3
	命令4
}
```



```shell
#!/bin/bash
a = 1
["$a" -eq 1] && {
	echo hello world
} || {
	echo gun
}
```

## 2.文件类型判断

| 指令 | 描述                                              |
| ---- | ------------------------------------------------- |
| -e   | 是否存在 不管是文件还是目录，只要存在，条件就成立 |
| -f   | 是否为普通文件                                    |
| -d   | 是否为目录                                        |
| -S   | 如果 FILE 存在且是一个套接字则为真                |
| -s   | 如果 FILE 存在且大小不为0则为真                   |

## 3.文件内容判断

```shell
#!/bin/bash
[-s FILE]
[!-s FILE]
```

## 4.文件权限判断

| 指令 | 描述                 |
| ---- | -------------------- |
| -r   | 当前用户是否对其可读 |
| -w   | 当前用户对其是否可写 |
| -x   | 是否可执行           |
| -u   | 是否有suid           |
| -g   | 是否有sgid           |
| -k   | 是否有t位            |

## 5.两个文件比较

```
file1 -nt file2	 比较file1是否比file2新
file1 -ot file2	 比较file1是否比file2旧
file1 -ef file2	 比较是否为同一个文件，或者用于判断硬连接，是否指向同一个inode
```

## 6.整数之间的判断

| 指令 | 描述     |
| ---- | -------- |
| -eq  | 相等     |
| -ne  | 不等     |
| -gt  | 大于     |
| -lt  | 小于     |
| -ge  | 大于等于 |
| -le  | 小于等于 |

## 7.字符串之间的判断

```
-z  是否为空字符串 字符串长度为0，就成立
-n  是否为非空字符串 只要字符串非空，就是成立
string1 = string2    是否相等           --等号两边要有空格
string1 != string2   不等
! 结果取反
```

**注意**

**[ "$1" = "abc" ]**   判断字符是否相等，变量也要用双引号

## 8.多重条件判断

逻辑判断符号：

- -a 和 && 逻辑与

- 只有两个条件都成立，整个大条件才成立

```shell
[ 1 -eq 1 ] && [ 2 -ne 3 ]

[ 1 -eq 1 -a 2 -ne 3 ]
```

- -o 和 || 逻辑或

- 只要其中一个条件成立，整个大条件就成立

```shell
[ 1 -eq 1 -o 2 -ne 2 ]

[ 1 -eq 1 ] || [ 2 -ne 2 ]
```

